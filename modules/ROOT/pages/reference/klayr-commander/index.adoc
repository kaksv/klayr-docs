= Klayr Commander
Mona Bärenfänger <mona@lightcurve.io>
:description: The Klayr Commander overview provides an introduction to the Klayr Commander CLI tool and its setup and usage.
:toc: preamble
:imagesdir: ../../../assets/images
:url_nodejs_download: https://nodejs.org/en/download/
:url_nodejs: https://nodejs.org/

:url_commander_commands: reference/klayr-commander/commands.adoc
:url_commander_config: reference/klayr-commander/commands.adoc#config

image:banner_commander.png[Logo]

Klayr Commander is a command line interface tool designed to be a low entry point, and also the most convenient tool for developers who are looking for an efficient way of coding.

Klayr Commander allows communication from the command line with a remote or local node in order to access and utilise Klayr-related functionalities.

*What can be achieved with Klayr Commander?*

* Creating transactions.
* Decrypting/encrypting passphrases or messages.
* Installing and managing a Klayr Core node.
* Creating new accounts.
* Viewing the details of a delegate.
* And much more...
For further details please see xref:{url_commander_commands}[all commands].

== Setup

NOTE: Supported platforms: Platforms with Node.js versions 8.3 and above.

=== Pre-installation

Klayr Commander requires {url_nodejs}[Node.js^] as the underlying engine for code execution.

==== Install Node.js

Node.js is supported on most operating systems.
Follow the instructions for your operating system on the {url_nodejs_download}[Node.js downloads page^].
Klayr Commander requires Node.js versions 8.3 or above.

NPM is automatically installed along with Node.js.

===== Verify Node.js installation

Confirm that Node.js and NPM have been successfully installed by executing the following command:

[source,bash]
----
node --version
npm --version
----

=== Installation

To install the latest version of Klayr Commander as a global command, install the NPM package as shown below:

[source,bash]
----
npm install --global --production klayr-commander
----

Upon successful completion, NPM will add the Klayr Commander executable to your PATH.

== Usage

TIP: For a full list of all commands and their available options, see the xref:{url_commander_commands][Command reference]

Pass arguments and options directly from the command line, as shown in the example below:

[source,sh-session]
----
$ klayr (-v|--version|version) # returns the current version of Klayr Commander.
$ klayr [COMMAND]:[ACTION] # to run a command. Available actions depend on the command.
$ klayr [COMMAND] # displays help for a specific command.
$ klayr # displays general help and the command list.
----

[source,sh-session]
----
COMMANDS
  account               Commands relating to Klayr accounts.
  block                 Commands relating to Klayr blocks.
  config                Manages Klayr Commander configuration.
  copyright             Displays copyright notice.
  delegate              Commands relating to Klayr delegates.
  help                  Displays help.
  message               Commands relating to user messages.
  network-identifier    Commands relating to the network identifier.
  node                  Commands relating to Klayr node.
  passphrase            Commands relating to Klayr passphrases.
  transaction           Commands relating to Klayr transactions.
  warranty              Displays warranty notice.
----

See concrete examples on the xref:{url_commander_commands}[Commands page].

== Configuration

Show the Klayr Commander config:

[source,bash]
----
klayr config:show
----

[source,js]
----
{
    "json": true, <1>
    "api": {
        "nodes": [], <2>
        "network": "main" <3>
    },
    "pretty": true <4>
}
----

<1> Provide output as json if set to true, otherwise output is table.
<2> Specify nodes to send requests.
<3> Specify a default network. It can be `main` or `test`.
<4> Pretty print JSON output if set to true.

=== Configure the network

[source,bash]
----
klayr config:set api.network <NETWORK>
----

Possible values for `<NETWORK>` are, `test` for Testnet, `main` for Mainnet and `beta` for Betanet.

TIP: If specific nodes were not specified for Klayr Commander, it will connect to pre-defined public nodes of the Klayr Mainnet or Testnet.

=== Configure specific nodes

Specify the node which will communicate with Klayr Commander.

In the case whereby more than one node is specified, it will use the first node as default, and the other nodes as a fallback if the first node does not respond.

[source,bash]
----
klayr config:set api.nodes https://127.0.0.1:4000,http://mynode.com:7000
----

See more examples with the xref:{url_commander_config}[`config` command] on the Commands page.

=== How to use a custom config file

The configuration file `config.json` is located in `klayr-sdk/commander/src/config.json`.
In order to store this file elsewhere, run Klayr Commander with the environmental variable `KLAYR_COMMANDER_CONFIG_DIR` set to the path of your choice.

=== Override config options

Some elements of this configuration can be overridden while executing a command, by using the following options:

[options="header",]
|===
|Setting |Option
|Use JSON output |`--json`
|Use table output |`--no-json`
|Pretty print JSON |`--pretty`
|Do not pretty print JSON |`--pretty false`
|===

See concrete examples on the xref:{url_commander_commands}[Commands page].

== Upgrade

To update your global installation to the latest version of Klayr Commander, simply execute the following command:

[source,bash]
----
npm update --global klayr-commander
----
